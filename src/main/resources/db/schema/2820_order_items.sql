DROP TABLE IF EXISTS ORDER_ITEMS;

CREATE TABLE ORDER_ITEMS (
	ID BIGINT GENERATED BY DEFAULT AS IDENTITY
	,ORDER_ID BIGINT NOT NULL
	,PRODUCT_ID BIGINT NOT NULL
	,QUANTITY INT NOT NULL
	,PRICE FLOAT
	,DISCOUNT FLOAT
	,STATUS VARCHAR(255)
	,CR_TIME TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL
  ,CR_USER_ID BIGINT NOT NULL
	,LM_USER_ID BIGINT NOT NULL
	,PRIMARY KEY (ID)
);

ALTER TABLE ORDER_ITEMS
  ADD CONSTRAINT FK_ORDER_ITEMS_ORDERS_ORDER_ID FOREIGN KEY (ORDER_ID) REFERENCES ORDERS;

ALTER TABLE ORDER_ITEMS
  ADD CONSTRAINT FK_ORDER_ITEMS_PRODUCTS_PRODUCT_ID FOREIGN KEY (PRODUCT_ID) REFERENCES PRODUCTS;

ALTER TABLE ORDER_ITEMS
  ADD CONSTRAINT FK_ORDERS_ITEMS_USERS_CR_USER_ID FOREIGN KEY (CR_USER_ID) REFERENCES USERS;

ALTER TABLE ORDER_ITEMS
  ADD CONSTRAINT FK_ORDERS_ITEMS_USERS_LM_USER_ID FOREIGN KEY (LM_USER_ID) REFERENCES USERS;
