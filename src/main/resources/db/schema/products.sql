DROP TABLE IF EXISTS PRODUCTS;

CREATE TABLE PRODUCTS (
	ID BIGINT GENERATED BY DEFAULT AS IDENTITY
	,CATEGORY_ID BIGINT NOT NULL
	,VENDOR_ID BIGINT NOT NULL
	,SKU_CODE VARCHAR(50)
	,TITLE VARCHAR(1000) NOT NULL
	,BRAND_ID BIGINT
	,DESCRIPTION VARCHAR(1000)
	,CART_DESCRIPTION VARCHAR(1000)
	,SHORT_DESCRIPTION VARCHAR(1000)
	,LONG_DESCRIPTION VARCHAR(1000)
	,URL_THUMB VARCHAR(100)
	,URL_IMG VARCHAR(100)
	,WEIGHT FLOAT
	,QUANTITY INT NOT NULL
	,BASE_PRICE FLOAT
	,DISCOUNT_PRICE FLOAT
  ,IS_OFFER BOOLEAN NOT NULL
  ,IS_RECOMMEND BOOLEAN NOT NULL
  ,IS_ACTIVE BOOLEAN DEFAULT TRUE NOT NULL
	,CR_TIME TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL
	,CR_USER_ID BIGINT NOT NULL
	,LM_TIME TIMESTAMP
	,LM_USER_ID BIGINT
	,PRIMARY KEY (ID)
);

ALTER TABLE PRODUCTS
  ADD CONSTRAINT FK_PRODUCTS_BRANDS_BRAND_ID FOREIGN KEY (BRAND_ID) REFERENCES BRANDS;

ALTER TABLE PRODUCTS
  ADD CONSTRAINT FK_PRODUCTS_CATEGORIES_CATEGORY_ID FOREIGN KEY (CATEGORY_ID) REFERENCES CATEGORIES;

ALTER TABLE PRODUCTS
  ADD CONSTRAINT FK_PRODUCTS_USERS_CR_USER_ID FOREIGN KEY (CR_USER_ID) REFERENCES USERS;

ALTER TABLE PRODUCTS
  ADD CONSTRAINT FK_PRODUCTS_USERS_LM_USER_ID FOREIGN KEY (LM_USER_ID) REFERENCES USERS;

ALTER TABLE PRODUCTS
  ADD CONSTRAINT FK_PRODUCTS_VENDORS_VENDOR_ID FOREIGN KEY (VENDOR_ID) REFERENCES VENDORS;